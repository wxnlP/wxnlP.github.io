## 1. ARM架构

ARM芯片属于精简指令集计算机(RISC：Reduced Instruction Set Computing)，它所用的指令比较简单，有如下特点：

① 对内存只有读、写指令

② 对于数据的运算是在CPU内部实现

③ 使用RISC指令的CPU复杂度小一点，易于设计

## 2. CPU寄存器

无论是cortex-M3/M4，

还是cortex-A7，

CPU内部都有R0、R1、……、R15寄存器；

它们可以用来“暂存”数据。

![image-20230822131905257](0.ARM%E6%9E%B6%E6%9E%84%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/11_regs.png)

对于R13、R14、R15，还另有用途：

R13：别名SP(Stack Pointer)，栈指针

R14：别名LR(Link Register)，用来保存返回地址

R15：别名PC(Program Counter)，程序计数器，表示当前指令地址，写入新值即可跳转

## 3. CPU计算

CPU计算 a=a+b 的过程：

![image-20250105220801754](0.ARM%E6%9E%B6%E6%9E%84%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/image-20250105220801754.png)

## 4. 简单汇编指令

* 读内存：Load

  ```
  # 示例
  LDR  R0, [R1, #4]  ; 读地址"R1+4", 得到的4字节数据存入R0
  ```

* 写内存：Stroe

  ```
  # 示例
  STR  R0, [R1, #4]  ; 把R0的4字节数据写入地址"R1+4"
  ```

* 加减

  ```
  ADD R0, R1, R2  ; R0=R1+R2
  ADD R0, R0, #1  ; R0=R0+1
  SUB R0, R1, R2  ; R0=R1-R2
  SUB R0, R0, #1  ; R0=R0-1
  ```

* 比较

  ```shell
  CMP R0, R1  ; 结果保存在PSR(程序状态寄存器)
  ```

* 跳转

  ```shell
  B  main  ; Branch, 直接跳转
  BL main  ; Branch and Link, 先把返回地址保存在LR寄存器里再跳转
  ```

  