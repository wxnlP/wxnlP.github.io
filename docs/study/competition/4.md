## æœºæ¢°ç»“æ„è®¾è®¡

> å…ˆè¯´ä¸€è¯´æœºæ¢°ç»“æ„è®¾è®¡å§ï¼Œæ¯•ç«Ÿç”¨äº†å¾ˆé•¿çš„æ—¶é—´ã€‚

### ææ–™é€‰æ‹©

**é“æï¼š** ç»“æ„ä¸€å®šè¦ç¨³å®šï¼Œå› ä¸ºè¦è€ƒè™‘åç»­å»å…¶ä»–å­¦æ ¡æ¯”èµ›çš„æ—¶å€™è¦é•¿é€”è¿è¾“ï¼Œç‰¹åˆ«æ˜¯å›½èµ›è·¨çœè¿è¿‡å»ä¼šæ‰å¾ˆå¤šèºä¸ã€‚æ‰€ä»¥ä½œå“ **éª¨éª¼** æ¡†æ¶ç”¨æ¬§æ ‡20çš„é“æï¼Œæœ€å¥½ä¸è¦ç”¨30æˆ–40ä»¥ä¸Šé™¤éç»“æ„éœ€è¦ï¼Œå› ä¸ºçœŸçš„å¾ˆé‡ã€‚é•¿åº¦ä¸å¯¹å¯ä»¥ä½¿ç”¨å·¥è®­ä¸­å¿ƒä¸€æ¥¼çš„é“£åºŠé’»æ–­ã€‚

![1708242805223](æˆ‘çš„å·¥åˆ›èµ›2023/1708242805223.png)

**é“æè¿æ¥é”®**ï¼šå»ºè®®ä½¿ç”¨è¿™ç§ç›´è§’è§’ç ï¼›æˆ‘ä»¬ä¹Ÿç”¨è¿‡ä¸€äº›å†…ç½®çš„è¿æ¥ä»¶å¹¶ä¸å¥½ç”¨ï¼Œå½“æ—¶è€ƒè™‘è£…äºšå…‹åŠ›æ¿å¥½è£…ä½†æ°æ°ç›¸åï¼Œæ‰€ä»¥ä¸æ¨èï¼Œç›´è§’è§’ç ç›¸å¯¹å®‰è£…æ›´ç®€å•ã€‚

![1708242924344](æˆ‘çš„å·¥åˆ›èµ›2023/1708242924344.png)

![1708243045701](æˆ‘çš„å·¥åˆ›èµ›2023/1708243045701.png)

å‰é¢æåˆ°è¿è¾“è¿‡ç¨‹ä¸­èºä¸å®¹æ˜“æ‰ï¼Œæ‰€ä»¥åœ¨é“æåº•éƒ¨ç”¨ç›´è§’é“å›ºå®šï¼Œé˜²æ­¢ç»“æ„å˜å‹ã€‚

![1708243175301](æˆ‘çš„å·¥åˆ›èµ›2023/1708243175301.png)

**äºšå…‹åŠ›æ¿**ï¼Œæ ¹æ®ä¸åŒç”¨å¤„å¯¹äºäºšå…‹åŠ›æ¿çš„åšåº¦é€‰æ‹©æœ‰ä¸€ç‚¹é€‰æ‹©ï¼š

- **4mm**ï¼Œ--->ç”¨äºå¤–å£³è£…é…æˆ–å°ç¨‹åº¦æ”¯æ’‘é¢ã€‚
- **4mmä»¥ä¸Š**ï¼Œ--->ç”¨äºéœ€è¦æ”¯æ’‘é‡é‡è¾ƒå¤§çš„åœ°æ–¹ã€‚
- **8mmä»¥ä¸Š**ï¼Œ--->ç”¨äºå‹ç¼©æŠµæŒ¡é¢ï¼Œéœ€è¦æ‰¿å—1000Nä»¥ä¸Šçš„åŠ›ã€‚

![1708243391533](æˆ‘çš„å·¥åˆ›èµ›2023/1708243391533.png)

### ç»“æ„è®¾è®¡

> ä¸‹é¢æ˜¯ç»“æ„è®¾è®¡æ–¹æ¡ˆï¼Œä»ä¸‹å¾€ä¸Šä»‹ç»ã€‚

è£…é…å›¾ï¼š

![1708260715405](æˆ‘çš„å·¥åˆ›èµ›2023/1708260715405.png)

**åƒåœ¾æ¡¶**ï¼Œå››ä¸ªæ¡¶å°ºå¯¸ä¸€æ ·ï¼Œæ¯”è§„å®šå°ºå¯¸è¦å¤§ä¸€äº›å…·ä½“å¤šå°‘å¿˜è®°äº†ï¼Œå¯ä»¥é‡ä¸€é‡ã€‚å»ºè®®æ¯”æˆ‘ä»¬çš„æ¡¶å°ä¸€äº›ã€‚

**å‹ç¼©è£…ç½®**ï¼Œä½¿ç”¨[è·¯æ˜“24Vç”µåŠ¨æ¨æ†å¹³åº•åº§](https://item.taobao.com/item.htm?id=545827512337&spm=pc_detail.27183998/evo365560b447259.202206.2.29c67dd6VCTesE)ï¼Œæœ‰å¾ˆå¤šé€Ÿåº¦å’Œæ¨åŠ›å¯é€‰ï¼Œç»“åˆéœ€æ±‚é€‰è´­ã€‚

![1708244316987](æˆ‘çš„å·¥åˆ›èµ›2023/1708244316987.png)

**åˆ†ç±»è£…ç½®**ï¼Œç”¨äºšå…‹åŠ›æ¿æ‹¼è£…çš„ï¼Œå°ºå¯¸çœ‹æˆ‘çš„UGå›¾çº¸å°±å¥½ï¼Œè¡¨é¢é“ºçš„A4çº¸ã€‚åšçš„æ¯”è¾ƒç®€é™‹ï¼Œè¿™é‡Œ **ä¸å»ºè®®ç»§ç»­é‡‡ç”¨** ï¼Œå›½èµ›å‰å¤§ç»™çš„åœŸè±†å¾ˆå°è€Œä¸”æ˜¯æ¹¿çš„(å¿…é¡»åæ§½ä¸€ä¸‹å‰å¤§ğŸ¤£)ï¼Œå¾ˆå®¹æ˜“æ²¾ä¸Šé¢ã€‚

> å¾ˆå¤šä¸œè¥¿å‚è€ƒå®éªŒå®¤çš„å®ç‰©ä¼šæ›´æ¸…æ¥šä¸€äº›ã€‚

## æ§åˆ¶ç»“æ„è®¾è®¡

> æ§åˆ¶ç»“æ„åˆ†åˆèµ›å’Œå†³èµ›ï¼Œåˆèµ›è¾ƒä¸ºç®€å•ï¼Œå†³èµ›å°±æ˜¯æŠŠåˆ†ç±»æ–¹æ³•æ”¹ä¸ºäº†æœºæ¢°è‡‚æŠ“å–ã€‚ç”±äºåˆèµ›å†³èµ›æœ€å¥½æ˜¯ä¸€ä¸ªæˆå“ï¼Œæ‰€ä»¥æ”¾åœ¨ä¸€èµ·è¯´ã€‚åŒºåˆ†æ–¹æ³•ä¸ºåƒåœ¾ä¸ªæ•°ï¼Œåƒåœ¾ä¸ºä¸€ä¸ªå³åˆèµ›ï¼Œåƒåœ¾å¤šä¸ªå³å†³èµ›ã€‚

### ç¡¬ä»¶é€‰æ‹©

#### ä¸»æ§é€‰æ‹©

æ§åˆ¶æ¿é€‰æ‹©çš„æ˜¯ **Arduino mega** (ç‰©æ–™å°è½¦éƒ¨åˆ†æœ‰æåˆ°)ï¼Œå…³äºArduino megaï¼š

Arduino Mega 2560æ˜¯åŸºäºATmega2560çš„ä¸»æ§å¼€å‘æ¿ã€‚Arduino Mega2560æ˜¯é‡‡ç”¨USBæ¥å£çš„æ ¸å¿ƒç”µè·¯æ¿ã€‚å…·æœ‰54è·¯æ•°å­—è¾“å…¥è¾“å‡ºï¼Œé€‚åˆéœ€è¦å¤§é‡IOæ¥å£çš„è®¾è®¡ã€‚å¤„ç†å™¨æ ¸å¿ƒæ˜¯ATmega2560,åŒæ—¶å…·æœ‰54è·¯æ•°å­—è¾“å…¥/è¾“å‡ºå£ï¼Œ16è·¯æ¨¡æ‹Ÿè¾“å…¥ï¼Œ4è·¯UARTæ¥å£ï¼Œä¸€ä¸ª16MHzæ™¶ä½“æŒ¯è¡å™¨ï¼Œä¸€ä¸ªUSBå£ï¼Œä¸€ä¸ªç”µæºæ’åº§ï¼Œä¸€ä¸ªICSP headerå’Œä¸€ä¸ªå¤ä½æŒ‰é’®ã€‚æ¿ä¸Šæœ‰æ”¯æŒä¸€ä¸ªä¸»æ§æ¿çš„æ‰€æœ‰èµ„æºã€‚Arduino Mega2560ä¹Ÿèƒ½å…¼å®¹ä¸ºArduino NUOè®¾è®¡çš„æ‰©å±•æ¿ã€‚å¯ä»¥è‡ªåŠ¨é€‰æ‹©3ä¸­ä¾›ç”µæ–¹å¼ï¼šå¤–éƒ¨ç›´æµç”µæºé€šè¿‡ç”µæºæ’åº§ä¾›ç”µï¼›ç”µæ± è¿æ¥ç”µæºè¿æ¥å™¨çš„GNDå’ŒVINå¼•è„šï¼›USBæ¥å£ç›´æµä¾›ç”µã€‚

![1708249530582](æˆ‘çš„å·¥åˆ›èµ›2023/1708249530582.png)

#### åˆ†ç±»è£…ç½®æ§åˆ¶é€‰æ‹©

1. **å•ç§åƒåœ¾** åˆ†ç±»é€‰æ‹©äºŒè½´äº‘å°æ§åˆ¶ï¼Œå³ä¸¤ä¸ªèˆµæœºå®Œæˆç¿»è½¬è¿åŠ¨ï¼›è¦é€‰æ‹©é«˜ç²¾åº¦èˆµæœºï¼Œ20kgä»·æ ¼åœ¨70~90ä¹‹é—´ã€‚

å¯ä»¥è¯•è¯•äºšåšæ™ºèƒ½çš„èˆµæœºï¼š[äºšåšæ™ºèƒ½15/20/25kgé‡‘å±æ•°å­—èˆµæœº](https://detail.tmall.com/item.htm?abbucket=11&id=624218042549&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

![1708250207978](æˆ‘çš„å·¥åˆ›èµ›2023/1708250207978.png)

2. **å¤šç§åƒåœ¾** æ˜¯é‡‡ç”¨ä¸¤ä¸ªæ­¥è¿›ç”µæœºæ§åˆ¶æœºæ¢°è‡‚xã€yè½´è¿åŠ¨ï¼Œç„¶åç”±4ä¸ªèˆµæœºæ§åˆ¶æŠ“å–ã€‚æ­¥è¿›ç”µæœºé€‰ç”¨å¥½ä¸€äº›çš„ä½†ä¹Ÿä¸éœ€è¦å¾ˆå¤§ï¼Œè¿™é‡Œæ¨èæˆ‘ä»¬ä½¿ç”¨çš„æ­¥è¿›ç”µæœºï¼š[42æ­¥è¿›ç”µæœº](https://item.taobao.com/item.htm?abbucket=11&id=582210006047&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6) ï¼Œç»è¿‡ä½¿ç”¨æµ‹è¯•ï¼Œè´¨é‡æ˜¯å¤Ÿç”¨çš„ã€‚é˜²æ­¢æ­¥è¿›ç”µæœºä¸¢æ­¥æƒ…å†µï¼Œæ­¥è¿›ç”µæœºé¡»é…å¤‡é—­ç¯æ§åˆ¶å™¨ï¼š[42æ­¥è¿›é—­ç¯ç”µæœºé©±åŠ¨å™¨æ¨¡å—](https://item.taobao.com/item.htm?abbucket=11&id=635439412574&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)ï¼Œé€‰ç”¨ **3Dæ‰“å°å¥—é¤** å³å¯ã€‚

![1708250513291](æˆ‘çš„å·¥åˆ›èµ›2023/1708250513291.png)

#### æ»¡è½½æ£€æµ‹

é€‰ç”¨è¶…å£°æ³¢ï¼Œæ ¹æ®æµ‹è·åˆ¤æ–­æ˜¯å¦æ»¡è½½ã€‚å› ä¸ºåƒåœ¾æ¡¶è§„å®šä¸ºé€æ˜ï¼Œçº¢å¤–æµ‹è·ä¼šå—åˆ°å½±å“ï¼Œè¶…å£°æ³¢åˆ™ä¸ä¼šå—åˆ°å½±å“ã€‚

![1708261211492](æˆ‘çš„å·¥åˆ›èµ›2023/1708261211492.png)

### é©±åŠ¨é€‰æ‹©

> é©±åŠ¨æ–¹é¢ä¸»è¦å°±æ˜¯æ¶‰åŠåˆ°èˆµæœºã€æ­¥è¿›ç”µæœºã€ç¨³å‹ã€‚

#### èˆµæœºæ‹“å±•æ¿

> è£…ç½®æ¶‰åŠåˆ°çš„èˆµæœºè¾¾åˆ°äº†10ä¸ªå·¦å³ï¼Œæ‰€ä»¥é…å¤‡ä¸€ä¸ªèˆµæœºæ‹“å±•æ¿æ§åˆ¶æ›´ç®€å•ä¸”æ–¹ä¾¿ï¼Œå¹»å°”ç§‘æŠ€å’Œäºšåšæ™ºèƒ½çš„æ‹“å±•æ¿åŠŸèƒ½å¤šä¸€äº›ï¼Œå…·å¤‡ä¸²å£æˆ–è“ç‰™è°ƒè¯•åŠŸèƒ½(å¯¹äºæœºæ¢°è‡‚æ›´æœ‰ç”¨)ï¼Œä»·æ ¼ä¹Ÿæ›´é«˜ä¸€äº›ï¼›ç¬¬ä¸‰ä¸ªé“¾æ¥åˆ™ä¾¿å®œä¸€äº›ï¼Œä¸å…·å¤‡ä¸²å£æˆ–è“ç‰™è°ƒè¯•åŠŸèƒ½ã€‚

[å¹»å°”ç§‘æŠ€16è·¯èˆµæœºæ§åˆ¶å™¨](https://item.taobao.com/item.htm?ali_refid=a3_430582_1006:1104166432:N:WHux2QBZPmZN5cA0zdwOaDVt9Q0NFo+R:dd29ba326e47e84a8e79131e1ba60692&ali_trackid=1_dd29ba326e47e84a8e79131e1ba60692&id=23334420583&spm=a21n57.1.0.0)

[äºšåšæ™ºèƒ½16è·¯èˆµæœºé©±åŠ¨æ¿](https://detail.tmall.com/item.htm?abbucket=11&id=648919288356&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

[16è·¯PWM Servoèˆµæœºé©±åŠ¨æ¿æ¨¡å—](https://detail.tmall.com/item.htm?abbucket=11&id=624505789589&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

> èˆµæœºæ‹“å±•æ¿éœ€è¦é€šè¿‡ç”µæ± ç¨³å‹æ¥å…¥ç”µæºï¼Œè€Œèˆµæœºç”µæºä¸€èˆ¬ä¸º5~8Vï¼Œè°ƒåˆ°6.5Vä¸ªäººè®¤ä¸ºè¾ƒåˆé€‚ã€‚èˆµæœºæ•°é‡å¢åŠ ä¼šå¯¼è‡´ç”µæµå¢é«˜ï¼Œæ‰€ä»¥ç¨³å‹æ¨¡å—çš„è¾“å‡ºç”µæµè¦å°½å¯èƒ½é«˜ï¼Œæ¨èæœ€åä¸€ä¸ªé“¾æ¥çš„ç¨³å‹æ¨¡å—ã€‚

[æ•°æ˜¾8Aå¸¦ç¨³å‹é™å‹æ¨¡å—](https://detail.tmall.com/item.htm?abbucket=11&id=621270751162&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

#### æ­¥è¿›ç”µæœºé—­ç¯é©±åŠ¨

> æ­¥è¿›ç”µæœºç”¨äºå†³èµ›æŠ“å–ï¼Œç²¾åº¦è¦æ±‚å¾ˆé«˜ï¼Œé—­ç¯é©±åŠ¨æ¿å±äºå¿…å¤‡ï¼

[42æ­¥è¿›é—­ç¯ç”µæœºé©±åŠ¨å™¨æ¨¡å—](https://item.taobao.com/item.htm?abbucket=11&id=635439412574&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

## ç›®æ ‡æ£€æµ‹ç¯å¢ƒæ­å»º

### ç¡¬ä»¶é€‰æ‹©

è§†è§‰é‡‡ç”¨ **æ ‘è“æ´¾4B** + **USBæ‘„åƒå¤´** + **7å¯¸ç”µå®¹å±**

> æ ‘è“æ´¾æ¨èäº†ä¸¤å®¶ï¼Œäºšåšæ™ºèƒ½æ˜¯å¤§å‚ï¼Œä»·æ ¼ä¼šè´µä¸€äº›ä¹Ÿä¼šé€ä¸€äº›èµ„æ–™å’Œäº¤æµç¾¤(ä¸ªäººæ„Ÿè§‰èµ„æ–™ç”¨å¤„ä¸å¤§ï¼Œä¸å¦‚ä¸Šç½‘æŸ¥)ï¼Œä¸è¿‡ç°åœ¨æ ‘è“æ´¾é™ä»·äº†ï¼Œä¹Ÿå¯ä»¥æ¥å—ã€‚åä¸€å®¶ä¼šä¾¿å®œä¸€äº›ï¼Œæˆ‘åé¢éƒ½æ˜¯åœ¨è¿™ä¸€å®¶ä¹°çš„ï¼Œå”®åä¹Ÿæœ‰è§£å†³è¿‡ä¸€äº›é—®é¢˜ã€‚

æ ‘è“æ´¾4B-4GBï¼š[æ ‘è“æ´¾4B Raspberry Pi 4 ](https://item.taobao.com/item.htm?abbucket=11&id=621469430002&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6&skuId=4398973969748)ï¼Œ[äºšåšæ™ºèƒ½ Raspberry Piæ ‘è“æ´¾4B ](https://detail.tmall.com/item.htm?abbucket=11&id=608798378397&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

> è¿™ä¸ªæ ‘è“æ´¾æ•™ç¨‹ç®—æ˜¯å¬ä¸é”™çš„ï¼ŒåŸºç¡€é…ç½®ä¼šæ•™ï¼ŒåµŒå…¥å¼å¼€å‘ä¹Ÿä¼šæ•™ï¼Œä¸è¿‡è¿™ä¸ªç³»åˆ—å¥½åƒæ²¡æœ‰æ›´æ–°å®Œï¼Œä¸è¿‡çœ‹å®Œå°±å¯¹æ ‘è“æ´¾äº†è§£ä¸å°‘äº†ã€‚å¦å¤–ï¼Œæˆ‘ç”¨æ ‘è“æ´¾å¼•è„šæƒ…å†µå¾ˆå°‘ï¼Œæ›´å¤šæ˜¯åšè§†è§‰ï¼Œåªéœ€è¦ä¸€ä¸ªæ‘„åƒå¤´å°±å¥½äº†ï¼Œåº§æ¤…ä¸éœ€è¦è¿‡å¤šå­¦ä¹ ï¼Œä½†è¦äº†è§£Linuxå‘½ä»¤ï¼Œç”¨å¤šäº†å°±ç†Ÿç»ƒäº†ã€‚

æ ‘è“æ´¾è§†é¢‘å­¦ä¹ ï¼š[æ ‘è“æ´¾ååˆ†é’Ÿç©è½¬ç³»åˆ—å…¥é—¨ç¯‡_](https://www.bilibili.com/video/BV16U4y1879Q/?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&vd_source=9360af603fa540663a17ba65dbad6a7d)

> æ‘„åƒå¤´å…¶å®ä¸€å¼€å§‹ç”¨çš„æ˜¯å®˜æ–¹äºŒä»£æ‘„åƒå¤´ï¼Œä½†æ˜¯æ ¡èµ›å‰ä¸€å¤©æ™šä¸Šçªç„¶åäº†ï¼Œå½“æ—¶ä¸´æ—¶å€Ÿçš„ä¸€ä¸ªæ‘„åƒå¤´ï¼Œé‡æ–°è°ƒè¯•è§’åº¦å®Œæˆçš„æ¯”èµ›ï¼›åæ¥ä¹°äº†ä¸€ä¸ªåˆè«åå…¶å¦™çš„åäº†ï¼Œæ‰€ä»¥åæ¥æ¢äº†USBæ‘„åƒå¤´ï¼Œä¸å®¹æ˜“åã€‚

æ ‘è“æ´¾å®˜æ–¹æ‘„åƒå¤´ï¼š[æ ‘è“æ´¾å®˜æ–¹åŸè£…æ‘„åƒå¤´Pi ](https://item.taobao.com/item.htm?abbucket=11&id=43818975625&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6&skuId=5080403811329)

> æ ‘è“æ´¾å®˜æ–¹äºŒä»£æ‘„åƒå¤´åƒç´ æ˜¯800ä¸‡ï¼Œå…¶å®å¤Ÿç”¨ï¼Œè¿™ä¸ªUSBæ‘„åƒå¤´æ˜¯1200ä¸‡ï¼Œå¾ˆæ¸…æ™°ã€‚æˆ‘è¿˜æ˜¯ **æ¨è** æ ‘è“æ´¾å®˜æ–¹äºŒä»£æ‘„åƒå¤´ï¼Œåªæœ‰ä»–ä¸å‡ºå¥‡æ€ªé—®é¢˜è¿˜æ˜¯å¾ˆå¥½ç”¨çš„ã€‚(æé†’ä¸€ä¸‹ **ä¸è¦ä¹°3ä»£** ï¼Œå®ƒä»…æ”¯æŒæœ€æ–°ç³»ç»Ÿï¼Œå¾ˆå¤šé…ç½®éƒ½ä¸æ–¹ä¾¿ï¼Œæ‰¾ä¸åˆ°æ•™ç¨‹)

USBæ‘„åƒå¤´ï¼š[1200ä¸‡ç”µè„‘æ‘„å½±å¤´USBå·¥ä¸šæ‘„åƒå¤´4K](https://detail.tmall.com/item.htm?id=728497114308&skuId=5053096577058&spm=a1z10.1-b-s.w4004-25044152529.11.217fccc9kjp3b7)

> æ˜¾ç¤ºå±ä¸€èˆ¬æœ‰ä¸¤ç§ï¼Œä¸€ç§æ•°æ®çº¿æ¥å£åœ¨åé¢ä¸€ç§åœ¨ä¾§é¢ï¼Œ**æ¨è** ä¹°åœ¨ä¾§é¢çš„ã€‚æœ€å¥½é€‰è§¦æ‘¸æ¬¾ï¼Œè°ƒè¯•ä»£ç æ–¹ä¾¿ã€‚

7å¯¸æ˜¾ç¤ºå±ï¼š[æ ‘è“æ´¾æ˜¾ç¤ºå± 4B 7å¯¸ è¶…æ¸…è§¦æ‘¸å±](https://detail.tmall.com/item.htm?abbucket=11&id=599265218230&ns=1&spm=a21n57.1.0.0.60e3523ceNBalO)

### ç›®æ ‡æ£€æµ‹æ¨¡å‹

> ä¸Šä¸€èŠ‚è¯´äº†ç¡¬ä»¶é€‰å‹ï¼Œå®Œæˆä»¥åå°±å¯ä»¥å‡†å¤‡è½¯ä»¶æ–¹é¢äº†ã€‚

æœ€åçš„è§†è§‰æ–¹æ¡ˆæ˜¯[YOLOv5-Lite](https://github.com/ppogg/YOLOv5-Lite) + [onnx](https://github.com/onnx/models)æ¨ç†åŠ é€Ÿ

### è®­ç»ƒç¯å¢ƒæ­å»ºï¼ˆæœ‰ä¿®æ”¹ï¼‰

> è§£é‡Šä¸€ä¸‹ï¼Œyoloæ˜¯ä¸€ç§ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œæœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œyolov5æ˜¯ä»–çš„ä¸€ä¸ªå®˜æ–¹ç‰ˆæœ¬ï¼Œè€Œyolov5-liteæ˜¯ç”±ä¸€ä½å¤§ä½¬æ”¹è‰¯åçš„ä¸€ç§æ›´è½»é‡çº§æ¨¡å‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦è½»é‡çº§å‘¢ï¼Œå› ä¸ºå¤ªå¤§çš„æ¨¡å‹è®¡ç®—é‡å¤§ï¼Œæ ‘è“æ´¾å¸¦ä¸åŠ¨ï¼Œç®—åŠ›ä¸å¤Ÿï¼Œå°±ä¼šå¯¼è‡´è§†é¢‘ç”»é¢å¾ˆå¡ï¼Œæ£€æµ‹é€Ÿåº¦ä¹Ÿæ…¢ã€‚**æœ¬è´¨ä¸Šyolov5å’Œyolov5-liteä½¿ç”¨æ–¹å¼æ˜¯ä¸€æ ·çš„ã€‚**

å®Œæ•´çš„è§†é¢‘æ•™ç¨‹ï¼Œæ­å»ºyolov5-liteæ¨¡å‹è®­ç»ƒç¯å¢ƒï¼š[æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè‡ªå·±çš„yolov5ç›®æ ‡æ£€æµ‹å¹³å°](https://www.bilibili.com/video/BV1f44y187Xg/)

å®Œæ•´çš„åšå®¢æ–‡æ¡£ï¼š[ç›®æ ‡æ£€æµ‹--æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè‡ªå·±çš„YOLOv5ç›®æ ‡æ£€æµ‹å¹³å°_ç‚®å“¥å¸¦ä½ å­¦çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/didiaopao/category_11321656.html)

ä»¥ä¸Šæ•™ç¨‹è®¾è®¡åˆ°å†…å®¹åŒ…æ‹¬ï¼š

- æ­å»ºyolov5-liteè®­ç»ƒç¯å¢ƒã€‚
- æ•°æ®é›†çš„æ ‡æ³¨ã€‚
- è®­ç»ƒè‡ªå®šä¹‰æ•°æ®é›†ï¼Œå¯¼å‡ºptæ–‡ä»¶ã€‚

åœ¨`export.py`æ–‡ä»¶ç›®å½•ç»ˆç«¯å¯ä»¥è¿è¡Œä¸‹åˆ—ä»£ç  **è¿›è¡Œæ¨¡å‹è½¬æ¢(.pt->.onnx)** ï¼š

> ç¬¬ä¸€ç‰ˆæ–‡æ¡£è¿™é‡Œæœ‰ä¸ªé”™è¯¯ï¼Œæ–‡å­—æè¿°é”™è¯¯ï¼Œä»¥æ­¤ç‰ˆä¸ºä¸»ã€‚

```shell
python export.py --weights best.pt
```

### æ ‘è“æ´¾ç¯å¢ƒæ­å»º

ç»è¿‡ä¸Šä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±å·²ç»æŠŠæˆ‘ä»¬çš„æ¨¡å‹è®­ç»ƒå®Œæˆï¼Œ **åç»­éœ€è¦** çš„æ˜¯é€šè¿‡ä»£ç è§£æè¿™ä¸ªptæ–‡ä»¶ï¼Œç„¶åé€šè¿‡å®ƒå»æ£€æµ‹æ‘„åƒå¤´ä¸€å¸§ä¸€å¸§çš„å›¾åƒæ•°æ®ï¼Œåˆ†ææˆ‘ä»¬ç›®æ ‡çš„ç§ç±»ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š

#### é…ç½®æ ‘è“æ´¾ç¯å¢ƒ

[æ ‘è“æ´¾4bå®‰è£…yolov5å®ç°å®æ—¶ç›®æ ‡æ£€æµ‹_æ ‘è“æ´¾4bè·‘yolov5å¸§ç‡ä½-CSDNåšå®¢](https://blog.csdn.net/m0_55833308/article/details/122633544)ï¼Œè¿™ä¸ªå¥½åƒéœ€è¦ä¼šå‘˜çœ‹äº†

[åŸºäºæ ‘è“æ´¾4Bçš„YOLOv5-Liteç›®æ ‡æ£€æµ‹çš„ç§»æ¤ä¸éƒ¨ç½²ï¼ˆå«è®­ç»ƒæ•™ç¨‹ï¼‰_æ ‘è“æ´¾yolo-CSDNåšå®¢](https://blog.csdn.net/black_sneak/article/details/131374492)

[æ ‘è“æ´¾-å¿«é€Ÿç›®æ ‡æ£€æµ‹yoloV5-liteè®­ç»ƒä¸ç§»æ¤_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV14r4y1578r/?spm_id_from=333.337.search-card.all.click&vd_source=9360af603fa540663a17ba65dbad6a7d)

**ä»¥ä¸Šä»…ä½œå‚è€ƒï¼Œå› ä¸ºä»–ä»¬æœ‰äº›åº“å¯èƒ½å®‰è£…ä¸ä¸Šï¼Œä¸”æ¨ç†ä»£ç ç”±äº›è®¸BUGï¼Œå¤§å®¶æ ¹æ®æˆ‘çš„æµç¨‹å¹¶å‚è€ƒä»–ä»¬çš„ä¸€èµ·çœ‹ï¼Œæˆ‘ä¼šæŠŠæˆ‘ä¿®æ”¹è¿‡çš„æ¨ç†ä»£ç æ”¾åœ¨è¿™é‡Œã€‚**

> å…¶å®æœ¬æ¥ç”±å¾ˆå¤šèµ„æ–™ã€é•œåƒã€åº“æ–‡ä»¶æˆ‘ä¿å­˜å¥½äº†ï¼Œä½†æ˜¯æ¯”èµ›çš„æ—¶å€™æˆ‘æŠŠå­˜èµ„æ–™çš„Uç›˜ä¸¢äº†ï¼Œèµ„æ–™ä¹Ÿä¸¢äº†ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œæˆ‘æ–°ä¹°çš„Uç›˜è¿˜æ˜¯ğŸ˜£ğŸ˜£ğŸ˜£ã€‚ä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œæˆ‘æ‰‹æ•²ä¸€éè¿‡ç¨‹ï¼Œå†æ‰¾ä¸€éèµ„æ–™ã€‚

**æ ‘è“æ´¾å¼€æœºï¼Œå®ŒæˆåŸºç¡€é…ç½®ã€‚**

è¿™é‡Œæ˜¯æˆ‘è´­ä¹°æ ‘è“æ´¾è·å¾—çš„äºšåšæ™ºèƒ½çš„èµ„æ–™ï¼Œå…è´¹åˆ†ç»™å¤§å®¶ï¼š

é“¾æ¥ï¼šhttps://pan.baidu.com/s/1Jm9qrot5CN4mZSJJhASeXg?pwd=cmzz 
æå–ç ï¼šcmzz

å®Œæˆ **åŸºç¡€è®¾ç½®** éƒ¨åˆ†æ—¢å¯ã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ **è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ç¨‹åº** ï¼Œæ¯”èµ›è¦æ±‚ä¸€é”®å¯åŠ¨ï¼Œæ‰€ä»¥è¦åœ¨è‡ªå¯åŠ¨æ–‡ä»¶é‡Œé¢æŠŠæˆ‘ä»¬çš„ç¨‹åºå¯åŠ¨ã€‚

#### yolov5-liteç§»æ¤

> ç”±äºæ‰‹è¾¹æ²¡æœ‰æ ‘è“æ´¾ï¼Œæ‰€ä»¥éƒ¨åˆ†å†…å®¹æˆ‘ç”¨è™šæ‹Ÿæœºæ¼”ç¤ºï¼Œå®é™…æ˜¯åŸºæœ¬ä¸€è‡´çš„ã€‚

1. **å…‹éš†yolov5-lite**

è®¿é—®Githubçš„yolov5-liteåœ°å€(è®°å¾—ä½¿ç”¨é­”æ³•)ï¼š[ä¸‹è½½YOLOv5-Lite](https://github.com/ppogg/YOLOv5-Lite)

![1708330842223](æˆ‘çš„å·¥åˆ›èµ›2023/1708330842223.png)

**æ¨è** ç›´æ¥ä¸‹è½½å‹ç¼©åŒ…æŠŠå‹ç¼©åŒ…ä¼ åˆ°æ ‘è“æ´¾ï¼Œç›´æ¥å³é”®è§£å‹æˆ– **ç»ˆç«¯è§£å‹** ï¼Œå›¾ç¤ºçš„æ–‡ä»¶å°†éƒ½ä¼šå­˜åœ¨äºæ–‡ä»¶å¤¹ã€‚

```shell
unzip your_file.zip # è§£å‹
```

è§£å‹ä»¥åçš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹å›¾ï¼ŒYOLO-Lite-masteræ˜¯æ–‡ä»¶å¤¹åç§°ï¼Œåç»­å°±ç§°ä¹‹ä¸º **yolov5-liteæ–‡ä»¶å¤¹**

![1708343507323](æˆ‘çš„å·¥åˆ›èµ›2023/1708343507323.png)

è§£é‡Šä¸€ä¸‹ **æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯** ï¼Œä¾‹å¦‚ï¼šåœ¨ **yolov5-liteæ–‡ä»¶å¤¹** ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œå³ç»ˆç«¯ä½ç½®åœ¨ **yolov5-liteæ–‡ä»¶å¤¹** ä½ç½®ã€‚

![1708343830872](æˆ‘çš„å·¥åˆ›èµ›2023/1708343830872.png)

æ“ä½œæ–¹æ³•ä¸ºé»˜è®¤ç»ˆç«¯è¾“å…¥`cd + your_path`ï¼Œä¾‹å¦‚ï¼š

![1708343950823](æˆ‘çš„å·¥åˆ›èµ›2023/1708343950823.png)

> å¯ä»¥æ•²å‰å‡ ä¸ªå­—æ¯ï¼Œç”¨Tabé”®è¡¥é½ã€‚ **åç»­ä¼šç›´æ¥è¯´åœ¨æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œæ‰¾åˆ°è·¯å¾„è‡ªè¡Œæ“ä½œã€‚**

2. **å®‰è£…pytorch**

å®‰è£…ä¾èµ–

```shell
sudo apt-get install libopenblas-dev libblas-dev m4 cmake cython python3-dev python3-yaml python3-setuptools python3-wheel python3-pillow python3-numpy
```

åœ¨æˆ‘çš„èµ„æ–™åŒ…æ‰¾åˆ°pytorchå®‰è£…åŒ…ï¼Œé€šè¿‡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹ **WinSCP** ä¼ è¾“åˆ°æ ‘è“æ´¾(4ä¸ªæ–‡ä»¶éƒ½ä¼ è¾“ï¼Œåé¢éƒ½è¦æœ‰)ï¼Œåœ¨ **pytorchå®‰è£…æ–‡ä»¶çš„ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯** ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…pytorchï¼š

```shell
pip3 install torch-1.8.0a0+56b43f4-cp37-cp37m-linux_armv7l.whl
pip3 install torchvision-0.9.0a0+8fb5838-cp37-cp37m-linux_armv7l.whl
```

![1708332404336](æˆ‘çš„å·¥åˆ›èµ›2023/1708332404336.png)

![1708329910522](æˆ‘çš„å·¥åˆ›èµ›2023/1708329910522.png)

3. **å®‰è£…ä¾èµ–**

**yolov5-liteæ–‡ä»¶å¤¹** ä¸‹æ‰¾åˆ° **requirements.txt** ï¼Œè¿™é‡Œæ˜¯éœ€è¦å®‰è£…çš„åº“çš„ç‰ˆæœ¬ï¼ŒæŠŠæˆ‘ä»¬å·²ç»å®‰è£…è¿‡çš„torchå’Œtorchvisionæ³¨é‡Šæ‰ï¼Œç„¶å **æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯** æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š

```shell
pip3 install -r requirements.txt
```

![1708331536097](æˆ‘çš„å·¥åˆ›èµ›2023/1708331536097.png)

å°† **v5lite-s.pt** æ–‡ä»¶è½¬ç§»åˆ°æ ‘è“æ´¾ä¸‹ **yolov5-liteæ–‡ä»¶å¤¹**ä¸‹

![1708332518118](æˆ‘çš„å·¥åˆ›èµ›2023/1708332518118.png)

4. **æ‘„åƒå¤´é…ç½®**

æ£€æµ‹æ ‘è“æ´¾æ˜¯å¦æœ‰ **opencv** ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥`python3`è°ƒå‡ºpythonç»ˆç«¯ï¼Œè¾“å…¥`import cv2`ä¸æŠ¥é”™å³å¯

![1708330217813](æˆ‘çš„å·¥åˆ›èµ›2023//1708330217813.png)

æ–°å»ºPyProjectsæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶cv_test.py

```shell
mkdir PyProjects
cd PyProjects
touch cv_test.py
```

![1708344562343](æˆ‘çš„å·¥åˆ›èµ›2023/1708344562343.png)

å¤åˆ¶ä¸‹é¢ä»£ç åˆ°cv_test.pyæ–‡ä»¶ã€‚

```python
import cv2

# åˆ›å»ºæ‘„åƒå¤´å¯¹è±¡
cap = cv2.VideoCapture(-1)  # 0 è¡¨ç¤ºé»˜è®¤æ‘„åƒå¤´ï¼Œå¦‚æœæœ‰å¤šä¸ªæ‘„åƒå¤´ï¼Œå¯ä»¥å°è¯•ä¸åŒçš„ç¼–å·

# æ£€æŸ¥æ‘„åƒå¤´æ˜¯å¦æˆåŠŸæ‰“å¼€
if not cap.isOpened():
    print("æ— æ³•æ‰“å¼€æ‘„åƒå¤´")
    exit()

# è®¾ç½®æ‘„åƒå¤´åˆ†è¾¨ç‡ï¼ˆå¯é€‰ï¼‰
# cap.set(cv2.CAP_PROP_FRAME_WIDTH, 640)
# cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 480)

while True:
    # ä»æ‘„åƒå¤´è¯»å–ä¸€å¸§å›¾åƒ
    ret, frame = cap.read()

    # æ£€æŸ¥å¸§æ˜¯å¦æˆåŠŸè¯»å–
    if not ret:
        print("æ— æ³•è¯»å–å¸§")
        break

    # åœ¨çª—å£ä¸­æ˜¾ç¤ºå›¾åƒ
    cv2.imshow('æ‘„åƒå¤´æµ‹è¯•', frame)

    # æŒ‰ä¸‹ 'q' é”®é€€å‡ºå¾ªç¯
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

# é‡Šæ”¾æ‘„åƒå¤´èµ„æº
cap.release()

# å…³é—­æ‰€æœ‰çª—å£
cv2.destroyAllWindows()
```

æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ‘„åƒå¤´ç”»é¢åˆ™æ²¡æœ‰é—®é¢˜ã€‚

```shell
python3 cv_test.py
```

![1708344698894](æˆ‘çš„å·¥åˆ›èµ›2023/1708344698894.png)

Ctrl+cé€€å‡ºï¼Œè¾“å…¥`ls /dev/video*`æŸ¥çœ‹æ‘„åƒå¤´è®¾å¤‡ï¼Œä¸€èˆ¬æ˜¯0/1

![1708334429106](æˆ‘çš„å·¥åˆ›èµ›2023/1708334429106.png)

5. **æ¨ç†**

yolov5-liteçš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯å°è¯•æ¨ç†ï¼š

```
python3 detect.py --source 0
```

> source 0ä¸è¡Œå¯ä»¥è¯•è¯•source 1ï¼Œå–å†³äºæ‘„åƒå¤´è®¾å¤‡ã€‚

#### onnxæ¨ç†

**å®‰è£…onnxruntime**

åœ¨æˆ‘çš„èµ„æ–™åŒ…é‡Œï¼Œ **onnxæ¨ç†** æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ªonnxruntimeåº“çš„å®‰è£…æ–‡ä»¶ï¼Œé€šè¿‡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹WinSCPä¼ è¾“åˆ°æ ‘è“æ´¾ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…ï¼š

```shell
pip3 install onnxruntime-1.9.1-cp37-none-linux_armv7l.whl
```

æ³¨æ„ï¼šonnxruntimeçš„å®‰è£…éœ€è¦python3.7 å’Œ numpy 1.21ä»¥ä¸Š

```shell
pip3 install numpy # å®‰è£…numpy
```

![1708333928679](æˆ‘çš„å·¥åˆ›èµ›2023/1708333928679.png)

**onnxæ¨ç†**

æ–°å»ºæ–‡ä»¶yolo.pyï¼Œ`python3 yolo.py`è¿è¡Œå³å¯ã€‚

```python
import random

import cv2
import numpy as np
import onnxruntime as ort
import time


def plot_one_box(x, img, color=None, label=None, line_thickness=None):
    """
    description: Plots one bounding box on image img,
                 this function comes from YoLov5 project.
    param: 
        x:      a box likes [x1,y1,x2,y2]
        img:    a opencv image object
        color:  color to draw rectangle, such as (0,255,0)
        label:  str
        line_thickness: int
    return:
        no return
    """
    tl = (
            line_thickness or round(0.002 * (img.shape[0] + img.shape[1]) / 2) + 1
    )  # line/font thickness
    color = color or [random.randint(0, 255) for _ in range(3)]
    x = x.squeeze()
    c1, c2 = (int(x[0]), int(x[1])), (int(x[2]), int(x[3]))
    cv2.rectangle(img, c1, c2, color, thickness=tl, lineType=cv2.LINE_AA)
    if label:
        tf = max(tl - 1, 1)  # font thickness
        t_size = cv2.getTextSize(label, 0, fontScale=tl / 3, thickness=tf)[0]
        c2 = c1[0] + t_size[0], c1[1] - t_size[1] - 3
        cv2.rectangle(img, c1, c2, color, -1, cv2.LINE_AA)  # filled
        cv2.putText(
            img,
            label,
            (c1[0], c1[1] - 2),
            0,
            tl / 3,
            [225, 255, 255],
            thickness=tf,
            lineType=cv2.LINE_AA,
        )


def _make_grid(nx, ny):
    xv, yv = np.meshgrid(np.arange(ny), np.arange(nx))
    return np.stack((xv, yv), 2).reshape((-1, 2)).astype(np.float32)


def cal_outputs(outs, nl, na, model_w, model_h, anchor_grid, stride):
    row_ind = 0
    grid = [np.zeros(1)] * nl
    for i in range(nl):
        h, w = int(model_w / stride[i]), int(model_h / stride[i])
        length = int(na * h * w)
        if grid[i].shape[2:4] != (h, w):
            grid[i] = _make_grid(w, h)

        outs[row_ind:row_ind + length, 0:2] = (outs[row_ind:row_ind + length, 0:2] * 2. - 0.5 + np.tile(
            grid[i], (na, 1))) * int(stride[i])
        outs[row_ind:row_ind + length, 2:4] = (outs[row_ind:row_ind + length, 2:4] * 2) ** 2 * np.repeat(
            anchor_grid[i], h * w, axis=0)
        row_ind += length
    return outs


def post_process_opencv(outputs, model_h, model_w, img_h, img_w, thred_nms, thred_cond):
    conf = outputs[:, 4].tolist()
    c_x = outputs[:, 0] / model_w * img_w
    c_y = outputs[:, 1] / model_h * img_h
    w = outputs[:, 2] / model_w * img_w
    h = outputs[:, 3] / model_h * img_h
    p_cls = outputs[:, 5:]
    if len(p_cls.shape) == 1:
        p_cls = np.expand_dims(p_cls, 1)
    cls_id = np.argmax(p_cls, axis=1)

    p_x1 = np.expand_dims(c_x - w / 2, -1)
    p_y1 = np.expand_dims(c_y - h / 2, -1)
    p_x2 = np.expand_dims(c_x + w / 2, -1)
    p_y2 = np.expand_dims(c_y + h / 2, -1)
    areas = np.concatenate((p_x1, p_y1, p_x2, p_y2), axis=-1)

    areas = areas.tolist()
    ids = cv2.dnn.NMSBoxes(areas, conf, thred_cond, thred_nms)
    if len(ids) > 0:
        return np.array(areas)[ids], np.array(conf)[ids], cls_id[ids]
    else:
        return [], [], []


def infer_img(img0, net, model_h, model_w, nl, na, stride, anchor_grid, thred_nms=0.4, thred_cond=0.5):
    # å›¾åƒé¢„å¤„ç†
    img = cv2.resize(img0, (model_w, model_h), interpolation=cv2.INTER_AREA)
    img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
    img = img.astype(np.float32) / 255.0
    blob = np.expand_dims(np.transpose(img, (2, 0, 1)), axis=0)

    # æ¨¡å‹æ¨ç†
    outs = net.run(None, {net.get_inputs()[0].name: blob})[0].squeeze(axis=0)

    # è¾“å‡ºåæ ‡çŸ«æ­£
    outs = cal_outputs(outs, nl, na, model_w, model_h, anchor_grid, stride)

    # æ£€æµ‹æ¡†è®¡ç®—
    img_h, img_w, _ = np.shape(img0)
    boxes, confs, ids = post_process_opencv(outs, model_h, model_w, img_h, img_w, thred_nms, thred_cond)

    return boxes, confs, ids


# å¾—åˆ°ä¸­å¿ƒåæ ‡
def get_centre(x_list):
    c_x = (x_list[0] + x_list[2]) / 2
    c_y = (x_list[1] + x_list[3]) / 2
    # c_x = c_x*np.cos(np.radians(45))-c_y*np.sin(np.radians(45))
    # c_y = c_y*np.cos(np.radians(45))+c_x*np.sin(np.radians(45))
    c_list = [c_x, c_y]
    # è¿”å›ä¸­å¿ƒåæ ‡åˆ—è¡¨
    return c_list


# å¾—åˆ°é¢ç§¯
def get_area(label_list):
    length = label_list[2] - label_list[0]
    height = label_list[3] - label_list[1]
    area = []
    # é¢ç§¯
    area.append(length * height)
    area.append(length/height)
    return area


# å¾—åˆ°æœ€å¤§é¢ç§¯çš„åæ ‡
def get_data(c_list, ids_, scores_):

    # è·å–åæ ‡è¯†åˆ«æ ‡ç­¾ä¸ªæ•°
    coordinate_length = len(c_list)
    # ä¸­å¿ƒåæ ‡åˆ—è¡¨
    centre_list = []
    area_list = []
    l_h_list = []
    # åˆ†åˆ«è¯»å–æ¯ä¸ªæ ‡ç­¾çš„æ•°æ®
    for i in range(int(coordinate_length)):
        # è·å–æ¯ä¸ªæ ‡ç­¾çš„åæ ‡åˆ—è¡¨
        coordinate = c_list[i]
        # è·å–é¢ç§¯å’Œé•¿å®½æ¯”
        area, l_h = get_area(coordinate)
        # ä¸­å¿ƒç‚¹åæ ‡åˆ—è¡¨
        centre_list.append(get_centre(coordinate))
        # é¢ç§¯åˆ—è¡¨
        area_list.append(area)
        # è·å–é•¿å®½æ¯”()
        l_h_list.append(l_h)
    if area_list:
        max_area = max(area_list)
        # è¯»å–é¢ç§¯æœ€å¤§çš„æ ‡ç­¾çš„ ç´¢å¼•
        area_index = area_list.index(max_area)
        # æ ¹æ®ç´¢å¼•è·å–é¢ç§¯æœ€å¤§çš„æ ‡ç­¾çš„æ•°æ®
        target = centre_list[area_index]
        label = dic_labels[ids_[area_index]]
        score = scores_[area_index]
        box = c_list[area_index]
        l_h = l_h_list[area_index]
        return box, target, label, score, l_h, len(area_list)
    else:
        return None, None, None, None, None, None


if __name__ == "__main__":

    # æ¨¡å‹åŠ è½½
    model_pb_path = "FINAL.onnx"
    so = ort.SessionOptions()
    net = ort.InferenceSession(model_pb_path, so)

    # æ ‡ç­¾å­—å…¸
    dic_labels = {
        0: '0-plastic_bottle',
        1: '0-drink_can',
        2: '0-paper',
        3: '0-carton',
        4: '0-milkCarton',
        5: '1-pericarp',
        6: '1-vegetable_leaf',
        7: '1-radish',
        8: '1-potato',
        9: '1-fruits',
        10: '2-battery',
        11: '2-Expired_drug',
        12: '2-button cell',
        13: '2-thermometer',
        14: '3-tile',
        15: '3-cobblestone',
        16: '3-brick',
        17: '3-paperCup',
        18: '3-tableware',
        19: '3-chopsticks',
        20: '3-butt',
        21: '3-mask'

    }

    # æ¨¡å‹å‚æ•°
    model_h = 320
    model_w = 320
    nl = 3
    na = 3
    stride = [8., 16., 32.]
    anchors = [[10, 13, 16, 30, 33, 23], [30, 61, 62, 45, 59, 119], [116, 90, 156, 198, 373, 326]]
    anchor_grid = np.asarray(anchors, dtype=np.float32).reshape(nl, -1, 2)

    video = 1
    cap = cv2.VideoCapture(video)
    flag_det = True  # åˆå§‹åŒ–è®¾ä¸ºFalseï¼Œæ”¶åˆ°ä¿¡å·åˆ™å˜ä¸ºTrue
    while True:
        success, img0 = cap.read()
        # å–æ„Ÿå…´è¶£åŒºåŸŸ
        # img0 = img0[20:220, 30: 290]

        if success:

            if flag_det:
                t1 = time.time()
                det_boxes, scores, ids = infer_img(img0, net, model_h, model_w, nl, na, stride, anchor_grid,
                                                   thred_nms=0.4, thred_cond=0.5)
                time.sleep(0.02)
                t2 = time.time()
                # print(det_boxes)
                # print(ids)
                print("-"*100)
                box, target, label, score, l_h, lens = get_data(det_boxes, ids, scores)
                print(f"box:{box}\ntarget:{target}\nlabel:{label}\nscore:{score}\n L-h:{l_h}\nlongs:{lens}")
                print("-" * 100)
                str_FPS = f"FPS: {(1 / (t2 - t1)):.2f}"
                if label:
                    label = f"{label}:{score:.2f}"
                    plot_one_box(box.astype(np.int16), img0, color=(255, 0, 0), label=label, line_thickness=1)
                    cv2.putText(img0, "str_FPS", (20, 20), cv2.FONT_HERSHEY_COMPLEX, 0.5, (0, 255, 0), 1)


            cv2.imshow("video", img0)
        key = cv2.waitKey(1) & 0xFF
        if key == ord('q'):
            break

    cap.release()

```

![1708345128636](æˆ‘çš„å·¥åˆ›èµ›2023/1708345128636.png)

> å¦‚æœå¯ä»¥æ­£å¸¸è¯†åˆ«æ£€æµ‹ç›®æ ‡ï¼Œç¯å¢ƒæ­å»ºå°±æ²¡æœ‰é—®é¢˜ï¼Œåç»­æ ¹æ®æ¯”èµ›è¦æ±‚æ·»åŠ é€šä¿¡ä»£ç å°±å¯ä»¥äº†ã€‚

### è‡ªå¯åŠ¨ç¨‹åº

æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥`sudo nano /etc/rc.local`ï¼Œä¿®æ”¹ä»£ç ä¸ºä¸€ä¸‹å½¢å¼ï¼Œå…¶ä¸­`#my codes`ä¸ºä¸»è¦æ·»åŠ ä»£ç ï¼Œ`autoboot.sh`ä¸ºå¯åŠ¨ç¨‹åºæ–‡ä»¶ï¼Œè‡ªå·±å‘½åå³å¯ã€‚

![1708946094611](æˆ‘çš„å·¥åˆ›èµ›2023/1708946094611.png)

æ ¹æ®ç›®å½•åˆ›å»º`autoboot.sh`æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸‹å†…å®¹

```shell
#!/bin/bash

export DISPLAY=:0
startx

# æ—¥å¿—
exec &>> /home/pi/logfile.log
echo "Script started at: $(date)"

# å¸‚èµ›
python3 /home/pi/Py_Projects/Municipal_contest.py
# åˆèµ›
# python3 /home/pi/Py_Projects/preliminary_contest.py
```

å…¶ä¸­`#!/bin/bash`ä¸ºå¿…é¡»å†…å®¹ï¼Œ`export DISPLAY=:0	startx`æ˜¯æˆ‘æ‘¸ç´¢å¾ˆä¹…ï¼Œå¯ä»¥å®ç°QTç•Œé¢å¼€æœºæ˜¾ç¤ºçš„å¿…é¡»å†…å®¹ï¼Œå¦åˆ™å¼€æœºQTç•Œé¢æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚æ—¥å¿—éƒ¨åˆ†å»ºè®®å¡«å†™ï¼Œæ–¹ä¾¿å¼€æœºè‡ªå¯å‡ºé—®é¢˜æ‰¾åŸå› ï¼Œè¾“å‡ºçš„æ—¥å¿—ä¼šåœ¨`/home/pi/logfile.log`ç›®å½•ä¸‹ã€‚`python3 /home/pi/Py_Projects/Municipal_contest.py`ä¸ºéœ€è¦è¿è¡Œçš„ä»£ç ã€‚

## æ˜¾ç¤ºå±ç•Œé¢è®¾è®¡

> æ²¡ä»€ä¹ˆå¯è®²çš„ï¼Œè‡ªå·±å»å­¦ä¸€å­¦pyqt5ï¼Œç®€å•è®¾è®¡ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚

### pythonç¯å¢ƒæ­å»º(windows)

Pythonç¯å¢ƒé…ç½®ï¼š

é“¾æ¥ï¼šhttps://pan.baidu.com/s/1WBBtduC-grJw9ZM88HqXfg?pwd=cmzz 
æå–ç ï¼šcmzz

![1708503608585](æˆ‘çš„å·¥åˆ›èµ›2023/1708503608585.png)

PyQt5ç¯å¢ƒé…ç½®ï¼š[ç•Œé¢å¼€å‘ï¼ˆ1ï¼‰ --- PyQt5ç¯å¢ƒé…ç½®_pyqt5 é…ç½®-CSDNåšå®¢](https://blog.csdn.net/WYKB_Mr_Q/article/details/129265121)

QTå­¦ä¹ ï¼š[Python Qt ç®€ä»‹ | ç™½æœˆé»‘ç¾½ (byhy.net)](https://www.byhy.net/tut/py/gui/qt_01/)

ç•Œé¢è®¾è®¡ä¸»è¦éœ€è¦æ³¨æ„çš„å‘¢å°±ä¸¤ç‚¹ï¼š

1. æ˜¯å¦æ˜¾ç¤ºæ‘„åƒå¤´ç”»é¢ï¼Œæˆ‘é€‰æ‹©æ˜¯æ˜¾ç¤ºï¼Œå› ä¸ºæˆ‘çœ‹åˆ°ç”»é¢å®‰å¿ƒä¸€äº›ï¼Œä¹ŸçŸ¥é“å“ªäº›æ£€æµ‹é”™äº†å†å»ä¼˜åŒ–æ•°æ®é›†ã€‚æˆ‘ç”¨çš„å°±æ˜¯ä¸€å¸§ä¸€å¸§çš„å›¾åƒï¼Œä»¥ç…§ç‰‡çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ã€‚(QImageï¼‰
2. è§†é¢‘çš„æ’­æ”¾ï¼Œä¸€å¼€å§‹ç”¨çš„Pyqt5çš„playerç»„ä»¶ï¼Œä½†æ˜¯ç§»æ¤åˆ°æ ‘è“æ´¾ä¼šä¸€ç›´æŠ¥é”™ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´åˆ†è§£æ ‘è“æ´¾ç®—åŠ›ä½¿ç”¨ï¼Œå¯¼è‡´ç›®æ ‡æ£€æµ‹æ¨ç†æ›´æ…¢ã€‚åæ¥é€‰ç”¨äº†æ ‘è“æ´¾çš„ä¸€ä¸ªæ’­æ”¾è½¯ä»¶omxplayerï¼Œå®‰è£…ä»–çš„pythonåº“ï¼Œç”¨ä»£ç æ§åˆ¶æ’­æ”¾ã€‚

### ä»£ç æ ¼å¼

è¿™æ˜¯ä¸€ä¸ª **ç¬¬ä¸€ç‰ˆç•Œé¢è®¾è®¡** ï¼Œæ²¡æœ‰åŠ ä¸²å£é€šä¿¡ã€è§†é¢‘ã€ç›®æ ‡æ£€æµ‹ã€‚

```python
from pathlib import Path
from threading import Thread
from PyQt5.QtCore import Qt
from PyQt5.QtMultimediaWidgets import QVideoWidget
from PyQt5.QtWidgets import *
from PyQt5.QtGui import QIcon, QPixmap, QFont
from PyQt5.QtMultimedia import QMediaPlayer, QMediaPlaylist, QMediaContent
from PyQt5.Qt import QUrl
import sys
import time


def is_mp4(file_path):
    # ä½¿ç”¨Pathç±»åˆ›å»ºæ–‡ä»¶è·¯å¾„å¯¹è±¡
    path = Path(file_path)

    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    if not path.exists():
        return False

    # æ£€æŸ¥æ–‡ä»¶æ‰©å±•åæ˜¯å¦ä¸º.mp4
    if path.suffix.lower() == '.mp4':
        return True
    return False


class Demo:
    def __init__(self):

        """æ§ä»¶åˆå§‹åŒ–"""
        self.ui = QMainWindow()
        # self.player = QMediaPlayer(self.ui)
        self.label = QLabel(self.ui)
        self.map_label = QLabel(self.ui)
        self.map2_label = QLabel(self.ui)
        # self.playlist = QMediaPlaylist(self.ui)
        # self.video_widget = QVideoWidget(self.ui)

        # self.slider = QSlider(Qt.Horizontal, self.ui)
        self.video_button = QPushButton("é€‰æ‹©è§†é¢‘æ–‡ä»¶", self.ui)
        self.map_button = QPushButton("é€‰æ‹©å›¾ç‰‡æ–‡ä»¶", self.ui)

        # self.textLabel = QLabel(self.ui)
        self.list = QListWidget(self.ui)
        # åˆ›å»ºè¡¨æ ¼
        rows = 4  # è¡Œ
        columns = 2  # åˆ—
        self.table = QTableWidget(rows, columns, self.ui)
        thread_text = Thread(
            target=self.Text_time
        )
        # å±æ€§åˆå§‹åŒ–å‡½æ•°è°ƒç”¨
        self.LayoutInit()
        self.WidgetInit()
        self.tabel_items()
        self.add_list_items()
        # self.Player()
        self.Signal()
        thread_text.start()

    # è§†é¢‘æ’­æ”¾å‡½æ•°
    # def Player(self):
    #     self.player.setVideoOutput(self.video_widget)  # è®¾ç½®è§†é¢‘è¾“å‡º
    #     self.player.setPlaylist(self.playlist)
    #     self.playlist.addMedia(QMediaContent(QUrl.fromLocalFile("bak.mp4")))
    #     self.playlist.addMedia(QMediaContent(QUrl.fromLocalFile("lajifenlei.mp4")))
    #     self.playlist.setPlaybackMode(QMediaPlaylist.Loop)
    #
    #     self.player.setVolume(50)
    #
    #     self.player.play()

    # Layoutç•Œé¢
    def LayoutInit(self):
        central_widget = QWidget(self.ui)
        self.ui.setCentralWidget(central_widget)
        layout_v = QVBoxLayout(central_widget)
        layout_h = QHBoxLayout(central_widget)
        layout_h2 = QHBoxLayout(central_widget)
        layout_h3 = QHBoxLayout(central_widget)

        layout_h.addWidget(self.label)
        layout_h.addWidget(self.video_button)
        layout_h.addWidget(self.map_button)
        layout_h.setStretch(0, 5)
        layout_h.setStretch(1, 1)
        layout_h.setStretch(2, 1)
        layout_h.setSpacing(170)

        layout_h2.addWidget(self.map2_label)
        layout_h2.addWidget(self.map_label)
        layout_h2.setStretch(0, 5)
        layout_h2.setStretch(1, 5)
        layout_h2.setSpacing(0)

        layout_h3.addWidget(self.table)
        layout_h3.addWidget(self.list)
        layout_h3.setStretch(0, 1)
        layout_h3.setStretch(1, 3)
        layout_h3.setSpacing(50)

        layout_v.addLayout(layout_h)
        layout_v.addLayout(layout_h2)
        # layout_v.addWidget(self.slider)
        layout_v.addLayout(layout_h3)
        layout_v.setStretch(0, 1)
        layout_v.setStretch(1, 5)
        layout_v.setStretch(2, 1)
        layout_v.setStretch(3, 3)

        self.ui.setLayout(layout_v)



    def Text_time(self):
        while True:
            text = "â¤â¤â¤â¤â¤åœ°çƒç¯ä¿å«å£«â¤â¤â¤â¤â¤"
            for i in range(108):
                self.label.setText(text)
                time.sleep(0.1)
                text = ' ' + text


    def tabel_items(self):
        font_tabel = self.table.font()
        font_tabel.setPointSize(20)
        self.table.setFont(font_tabel)
        self.item1 = QTableWidgetItem("å¯å›æ”¶åƒåœ¾")
        self.table.setItem(0, 0, self.item1)
        self.item2 = QTableWidgetItem("æœ‰å®³åƒåœ¾")
        self.table.setItem(1, 0, self.item2)
        self.item3 = QTableWidgetItem("å¨ä½™åƒåœ¾")
        self.table.setItem(2, 0, self.item3)
        self.item4 = QTableWidgetItem("å…¶ä»–åƒåœ¾")
        self.table.setItem(3, 0, self.item4)
        self.item5 = QTableWidgetItem("æœªæ»¡è½½")
        self.item6 = QTableWidgetItem("æœªæ»¡è½½")
        self.item7 = QTableWidgetItem("æœªæ»¡è½½")
        self.item8 = QTableWidgetItem("æœªæ»¡è½½")
        self.table.setItem(0, 1, self.item5)
        self.table.setItem(1, 1, self.item6)
        self.table.setItem(2, 1, self.item7)
        self.table.setItem(3, 1, self.item8)

    def add_list_items(self):
        for i in range(10):
            print(self.list.count())
            news = QListWidgetItem("å¯å›æ”¶åƒåœ¾")
            self.list.addItem(news)
            self.list.scrollToItem(news, QListWidget.PositionAtBottom)

    # æ§ä»¶åˆå§‹åŒ–
    def WidgetInit(self):
        self.ui.setWindowTitle("æ’­æ”¾è§†é¢‘")
        self.ui.resize(177 * 4, 400)
        self.label.setFrameStyle(QFrame.Panel | QFrame.Sunken)
        self.table.setShowGrid(False)  # æ˜¯å¦æ˜¾ç¤ºç½‘æ ¼
        self.table.setHorizontalHeaderLabels(["ç±»åˆ«", "æ˜¯å¦æ»¡è½½"])
        self.table.horizontalHeader().setSectionResizeMode(QHeaderView.Stretch)
        font_list = self.list.font()
        font_list.setPointSize(18)
        self.list.setFont(font_list)
        # self.label.setAlignment(Qt.AlignCenter)
        map_widget = QPixmap("../../pictures/bu2.jpg")
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map_label.setPixmap(map_widget)
        self.map_label.setScaledContents(True)

    # ä¿¡å·æ§½å‡½æ•°åˆå§‹åŒ–
    def Signal(self):
        # self.slider.sliderMoved.connect(self.GetMoved)
        # self.player.durationChanged.connect(self.GetDuration)
        # self.player.positionChanged.connect(self.GetPosition)
        self.video_button.clicked.connect(self.GetMap2)
        self.map_button.clicked.connect(self.GetMap)

    # æ§½å‡½æ•°
    # def GetDuration(self, d):
    #     if d:
    #         self.slider.setRange(0, d)
    #         seconds = int(d / 1000)
    #         minutes = int(seconds / 60)
    #         seconds -= minutes * 60
    #         # self.label.setText(f"æ€»æ—¶é•¿ï¼š{minutes}:{seconds}")
    #         print(f"æ€»æ—¶é•¿ï¼š{minutes}:{seconds}")

    # def GetPosition(self, time):
    #     if time:
    #         self.slider.setValue(time)
    #
    # def GetMoved(self, time):
    #     self.player.setPosition(time)

    # def GetFiles(self):
    #     video = QFileDialog()
    #     url = video.getOpenFileUrl()[0].toLocalFile()
    #     self.playlist.addMedia(QMediaContent(QUrl.fromLocalFile(url)))
    #     if is_mp4(url):
    #         num = self.playlist.mediaCount()
    #         for i in range(num):
    #             files = []
    #             file = self.playlist.media(i).canonicalUrl().toString()
    #             files.append(file)
    #             print(files)
    #
    #         self.playlist.setCurrentIndex(num - 1)
    #     else:
    #         QMessageBox.warning(self.ui, "è­¦å‘Š", "æ‰€é€‰æ•°æ®ç±»å‹ä¸æ˜¯'.MP4ï¼'", QMessageBox.Yes | QMessageBox.No)

    def GetMap2(self):
        video = QFileDialog()
        url = video.getOpenFileUrl()[0].toLocalFile()
        map_widget = QPixmap(url)
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map2_label.setPixmap(map_widget)
        self.map2_label.setScaledContents(True)

    def GetMap(self):
        video = QFileDialog()
        url = video.getOpenFileUrl()[0].toLocalFile()
        map_widget = QPixmap(url)
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map_label.setPixmap(map_widget)
        self.map_label.setScaledContents(True)


if __name__ == "__main__":
    while 1:
        app = QApplication(sys.argv)
        app.setWindowIcon(QIcon("../ico/social-gears.ico"))
        bar = Demo()

        bar.ui.show()
        bar.ui.showFullScreen()
        sys.exit(app.exec_())

```

**è¿™é‡Œä¸æ¨èæˆ‘è¿™ç§ä»£ç æ ¼å¼ï¼Œä¿®æ”¹èµ·æ¥å¾ˆéº»çƒ¦ï¼Œåˆ°åé¢å‡ ç™¾å·çš„ä»£ç åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä¿®æ”¹èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚** æ¨èçš„æ–¹å¼æ˜¯æ¯ä¸€ä¸ªåŠŸèƒ½å•ç‹¬ä¸€ä¸ªpythonæ–‡ä»¶ï¼Œå»ºç«‹ä¸€ç³»åˆ—çš„å‡½æ•°åº“ï¼Œæœ€åå†™ä¸€ä¸ªå•ç‹¬çš„è°ƒç”¨æ–‡ä»¶ï¼›å½“æŸä¸ªåŠŸèƒ½å‡ºé—®é¢˜ä»¥åå°±å¯ä»¥åœ¨å…¶æ–‡ä»¶é‡Œä¿®æ”¹ï¼Œä»£ç é‡å°‘ï¼Œä¸”æ›´ç›´è§‚ã€‚

ä¸‹é¢å±•ç¤ºä¸€ä¸‹æˆ‘åé¢å†™çš„ä¸€ä¸ªç²—ç³™ç‰ˆQTç™»å½•ç•Œé¢ï¼Œå±•ç¤ºä¸€ä¸‹å‡½æ•°åº“è¿ç”¨ï¼š

![1708947182342](æˆ‘çš„å·¥åˆ›èµ›2023/1708947182342.png)

**å‡½æ•°åº“ï¼š**

`demoUI.py`

```python
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'demoUI.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(640, 480)
        self.resign = QtWidgets.QPushButton(Form)
        self.resign.setGeometry(QtCore.QRect(210, 230, 91, 41))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.resign.setFont(font)
        self.resign.setObjectName("resign")
        self.forget = QtWidgets.QPushButton(Form)
        self.forget.setGeometry(QtCore.QRect(340, 230, 91, 41))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.forget.setFont(font)
        self.forget.setObjectName("forget")
        self.label_username = QtWidgets.QLabel(Form)
        self.label_username.setGeometry(QtCore.QRect(210, 120, 72, 30))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_username.setFont(font)
        self.label_username.setObjectName("label_username")
        self.label_passwd = QtWidgets.QLabel(Form)
        self.label_passwd.setGeometry(QtCore.QRect(230, 160, 72, 30))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_passwd.setFont(font)
        self.label_passwd.setTabletTracking(False)
        self.label_passwd.setObjectName("label_passwd")
        self.UserName = QtWidgets.QLineEdit(Form)
        self.UserName.setGeometry(QtCore.QRect(290, 120, 141, 31))
        self.UserName.setObjectName("UserName")
        self.Passwd = QtWidgets.QLineEdit(Form)
        self.Passwd.setGeometry(QtCore.QRect(290, 160, 141, 31))
        self.Passwd.setObjectName("Passwd")
        self.Inter = QtWidgets.QPushButton(Form)
        self.Inter.setGeometry(QtCore.QRect(270, 290, 91, 41))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.Inter.setFont(font)
        self.Inter.setStyleSheet("background-color: rgb(0, 85, 255);")
        self.Inter.setObjectName("Inter")
        self.label = QtWidgets.QLabel(Form)
        self.label.setGeometry(QtCore.QRect(220, 30, 201, 51))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.label.setFont(font)
        self.label.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.label.setObjectName("label")

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate("Form", "äººæœºäº¤äº’ç•Œé¢"))
        self.resign.setText(_translate("Form", "æ³¨å†Œè´¦å·"))
        self.forget.setText(_translate("Form", "å¿˜è®°å¯†ç "))
        self.label_username.setText(_translate("Form", "ç”¨æˆ·åï¼š"))
        self.label_passwd.setText(_translate("Form", "å¯†ç ï¼š"))
        self.Inter.setText(_translate("Form", "ç™»å½•"))
        self.label.setText(_translate("Form", "ç”¨æˆ·ç™»å½•ç•Œé¢"))

```

`drug.py`

```python
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'drug.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_drug(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(640, 480)
        self.label = QtWidgets.QLabel(Form)
        self.label.setGeometry(QtCore.QRect(210, 40, 211, 61))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.label.setFont(font)
        self.label.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.label.setObjectName("label")
        self.red = QtWidgets.QPushButton(Form)
        self.red.setGeometry(QtCore.QRect(140, 150, 121, 81))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.red.setFont(font)
        self.red.setStyleSheet("background-color: rgb(255, 36, 17);")
        self.red.setObjectName("red")
        self.green = QtWidgets.QPushButton(Form)
        self.green.setGeometry(QtCore.QRect(140, 280, 121, 81))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.green.setFont(font)
        self.green.setStyleSheet("background-color: rgb(29, 255, 29);")
        self.green.setObjectName("green")
        self.title = QtWidgets.QPushButton(Form)
        self.title.setGeometry(QtCore.QRect(360, 150, 121, 81))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.title.setFont(font)
        self.title.setStyleSheet("background-color: rgb(31, 24, 255);")
        self.title.setObjectName("title")
        self.crey = QtWidgets.QPushButton(Form)
        self.crey.setGeometry(QtCore.QRect(360, 280, 121, 81))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.crey.setFont(font)
        self.crey.setStyleSheet("background-color: rgb(102, 240, 255);")
        self.crey.setObjectName("crey")

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate("Form", "Form"))
        self.label.setText(_translate("Form", "è¯å“ä»“åº“ç¤ºæ„"))
        self.red.setText(_translate("Form", "1å·"))
        self.green.setText(_translate("Form", "3å·"))
        self.title.setText(_translate("Form", "2å·"))
        self.crey.setText(_translate("Form", "4å·"))

```

`regist.py`

```python
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'regist.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_regist(object):
    def setupUi(self, widget):
        widget.setObjectName("widget")
        widget.resize(640, 480)
        self.regist_user = QtWidgets.QLabel(widget)
        self.regist_user.setGeometry(QtCore.QRect(180, 90, 91, 31))
        self.regist_user.setMinimumSize(QtCore.QSize(0, 0))
        self.regist_user.setBaseSize(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.regist_user.setFont(font)
        self.regist_user.setObjectName("regist_user")
        self.text_user = QtWidgets.QLineEdit(widget)
        self.text_user.setGeometry(QtCore.QRect(280, 90, 141, 31))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.text_user.setFont(font)
        self.text_user.setObjectName("text_user")
        self.text_passwd = QtWidgets.QLineEdit(widget)
        self.text_passwd.setGeometry(QtCore.QRect(280, 150, 141, 31))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.text_passwd.setFont(font)
        self.text_passwd.setObjectName("text_passwd")
        self.text_passwd_Q = QtWidgets.QLineEdit(widget)
        self.text_passwd_Q.setGeometry(QtCore.QRect(280, 210, 141, 31))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.text_passwd_Q.setFont(font)
        self.text_passwd_Q.setObjectName("text_passwd_Q")
        self.regist_passwd_Q = QtWidgets.QLabel(widget)
        self.regist_passwd_Q.setGeometry(QtCore.QRect(180, 210, 91, 31))
        self.regist_passwd_Q.setMinimumSize(QtCore.QSize(0, 0))
        self.regist_passwd_Q.setBaseSize(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.regist_passwd_Q.setFont(font)
        self.regist_passwd_Q.setObjectName("regist_passwd_Q")
        self.regist_passwd = QtWidgets.QLabel(widget)
        self.regist_passwd.setGeometry(QtCore.QRect(180, 150, 91, 31))
        self.regist_passwd.setMinimumSize(QtCore.QSize(0, 0))
        self.regist_passwd.setBaseSize(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.regist_passwd.setFont(font)
        self.regist_passwd.setObjectName("regist_passwd")
        self.Regist = QtWidgets.QPushButton(widget)
        self.Regist.setGeometry(QtCore.QRect(250, 280, 111, 41))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.Regist.setFont(font)
        self.Regist.setStyleSheet("background-color: rgb(0, 0, 255);")
        self.Regist.setObjectName("Regist")

        self.retranslateUi(widget)
        QtCore.QMetaObject.connectSlotsByName(widget)

    def retranslateUi(self, widget):
        _translate = QtCore.QCoreApplication.translate
        widget.setWindowTitle(_translate("widget", "æ³¨å†Œ"))
        self.regist_user.setText(_translate("widget", "è¾“å…¥è´¦å·:"))
        self.regist_passwd_Q.setText(_translate("widget", "ç¡®è®¤å¯†ç :"))
        self.regist_passwd.setText(_translate("widget", "è¾“å…¥å¯†ç :"))
        self.Regist.setText(_translate("widget", "æ³¨å†Œ"))

```

è°ƒç”¨å‡½æ•°`Demo1.py`ï¼š

```python
import sys
# è¿™éƒ¨åˆ†å°±æ˜¯è‡ªå®šä¹‰å‡½æ•°åº“ï¼Œfrom æ–‡ä»¶å import å‡½æ•°å/ç±»
from demoUI import Ui_Form
from regist import Ui_regist
from drug import Ui_drug
#
from PyQt5.QtWidgets import QApplication, QMainWindow


class MainWindow(QMainWindow, Ui_Form):
    def __init__(self):
        super(MainWindow, self).__init__()
        self.setupUi(self)


class Register(QMainWindow, Ui_regist):
    def __init__(self, parent=None):
        super(Register, self).__init__(parent)
        self.setupUi(self)

    def Open(self):
        self.show()


class Drug(QMainWindow, Ui_drug):
    def __init__(self, parent=None):
        super(Drug, self).__init__(parent)
        self.setupUi(self)

    def Open(self):
        self.show()


if __name__ == "__main__":
    app = QApplication(sys.argv)
    main = MainWindow()
    register = Register()
    drug = Drug()
    main.resign.clicked.connect(register.Open)
    main.Inter.clicked.connect(drug.Open)
    main.show()
    sys.exit(app.exec_())

```
